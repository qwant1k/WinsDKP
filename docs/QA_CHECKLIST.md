# QA Smoke Test Checklist

## Запуск
- [ ] `cp .env.example .env` — успешно
- [ ] `make init` — все контейнеры запущены без ошибок
- [ ] http://localhost:5173 — загружается страница логина
- [ ] http://localhost:3000/api/docs — Swagger UI доступен
- [ ] http://localhost:3000/api/v1/health/live — `{ status: "ok" }`
- [ ] http://localhost:3000/api/v1/health/ready — `{ status: "ok" }`
- [ ] http://localhost:3000/api/v1/health/deps — postgres: ok, redis: ok
- [ ] http://localhost:8025 — Mailpit доступен
- [ ] http://localhost:9001 — MinIO Console доступен

## Auth
- [ ] Логин admin@ymir.local / Password123! — успешный вход
- [ ] Логин leader@ymir.local — успешный вход, видна боковая панель
- [ ] Логин elder@ymir.local — успешный вход
- [ ] Логин member@ymir.local — успешный вход (нет кнопок управления)
- [ ] Логин newbie@ymir.local — успешный вход
- [ ] Регистрация нового пользователя — форма работает
- [ ] Logout — перенаправление на /login, токены очищены
- [ ] Refresh token — автообновление при истечении access token

## Dashboard
- [ ] DKP баланс отображается
- [ ] Боевая мощь и уровень отображаются
- [ ] Последние активности загружаются
- [ ] Новости клана загружаются

## Clan
- [ ] Список участников отображается с ролями, БМ, уровнем, DKP
- [ ] Поиск участников работает
- [ ] (leader/elder) Заявки на вступление видны
- [ ] (leader/elder) Можно одобрить/отклонить заявку
- [ ] (leader) Можно изменить роль участника
- [ ] (elder) Можно исключить участника (не лидера)

## DKP
- [ ] Кошелёк: баланс, доступно, удержание отображаются
- [ ] История транзакций загружается
- [ ] Пагинация работает
- [ ] Ссылка на "Правила DKP" открывает страницу правил

## Activities
- [ ] Список активностей загружается
- [ ] (elder) Кнопка "Создать" отображается
- [ ] (elder) Создание активности работает
- [ ] Участник может присоединиться к OPEN активности
- [ ] (elder) Смена статуса: DRAFT→OPEN→IN_PROGRESS
- [ ] (elder) Завершение: DKP начисляются участникам

## Auctions
- [ ] Список аукционов загружается
- [ ] Переход на страницу аукциона работает
- [ ] Активный лот отображается с таймером
- [ ] Ставка принимается (проверка мин. суммы, баланса)
- [ ] Anti-sniper: таймер продлевается при ставке в последние 20с
- [ ] Чат аукциона: отправка и получение сообщений
- [ ] (elder) Завершение лота: определение победителя
- [ ] DKP hold создаётся при ставке
- [ ] DKP hold освобождается при перебивании ставки
- [ ] DKP hold финализируется при победе
- [ ] Ссылка на "Правила аукциона" работает

## Randomizer
- [ ] Список сессий загружается
- [ ] (elder) Создание сессии из предметов хранилища
- [ ] (elder) Запуск розыгрыша — анимация работает
- [ ] Победитель определяется и отображается
- [ ] Повторный запуск по тому же session_id невозможен
- [ ] Предмет списывается из хранилища

## Warehouse
- [ ] Список предметов загружается с цветовой кодировкой по редкости
- [ ] Поиск работает
- [ ] (elder) Добавление нового предмета
- [ ] (elder) Удаление предмета
- [ ] Отображение DKP цены и источника

## News
- [ ] Список новостей загружается
- [ ] Закреплённые новости сверху
- [ ] Комментарии загружаются при раскрытии
- [ ] Добавление комментария работает
- [ ] Реакция (лайк) работает
- [ ] (elder) Создание новости

## Feed
- [ ] Лента загружается
- [ ] Создание поста работает (все роли)
- [ ] Комментарии работают
- [ ] Реакции работают
- [ ] Репорт поста работает
- [ ] Пагинация работает

## Notifications
- [ ] Список уведомлений загружается
- [ ] Непрочитанные выделены
- [ ] Счётчик в шапке обновляется
- [ ] "Прочитать все" работает
- [ ] Клик по уведомлению отмечает как прочитанное

## Admin Panel (admin@ymir.local)
- [ ] Дашборд: статистика отображается
- [ ] Пользователи: таблица с поиском и пагинацией
- [ ] Пользователи: блокировка/разблокировка
- [ ] Пользователи: имперсонация (с аудитом)
- [ ] Аудит: лог загружается с фильтрами
- [ ] Настройки: отображение и редактирование system_settings

## Profile
- [ ] Данные пользователя отображаются
- [ ] Редактирование: displayName, BM, level, locale
- [ ] Хронология загружается

## Security
- [ ] Неавторизованный запрос → 401
- [ ] Member не может создать активность → 403
- [ ] Newbie не может одобрить заявку → 403
- [ ] DKP не уходит в минус при ставке
- [ ] Идемпотентность: повторная ставка с тем же ключом не создаёт дубль

## Realtime
- [ ] WebSocket подключается при входе
- [ ] Уведомления приходят в реальном времени
- [ ] Ставки аукциона обновляются у всех участников
- [ ] Таймер anti-sniper отображается при продлении

## Responsive
- [ ] Mobile (< 768px): сайдбар скрывается, контент адаптивен
- [ ] Tablet (768-1024px): корректное отображение
- [ ] Desktop (> 1024px): полный layout
